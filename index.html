<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">	
  <meta name="description" content="Tarjeta de asistencia a evento, confirmacion de asistencia | guardo en local luego BD Cloudflare" />
  <meta name="keywords" content="evento, confirmacion, asistencia, tarjeta, invitacion, cloudflare BD" />
  <meta name="author" content="Kikiriya" />
 
    <title>Tarjeta de Asistencia | Confirmacion</title>
	
	 <!-- Open Graph Meta Tags -->
  <meta property="og:title" content="Tarjeta de Asistencia | Confirmacion" />
  <meta property="og:description" content="Tarjeta de asistencia a evento, confirmacion de asistencia | guardo en local luego BD Cloudflare" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://confirmarinvitacion.netlify.app/" />
  <meta property="og:image" content="assets/anfitrionFoto.jpeg" />  
  <meta property="og:locale" content="es_UY">
  
	<link rel="shortcut icon" href="assets/lampara_light.png" type="image/png">
	
    <style>
	:root {
		--amma:#e7996352;
		--rosa:#e89191bd;
      --preppy-bg: #f5efe7;
	  --preppy_white:#f5efe7;
      --bg_preppy-si: #f0ffa5;
	  --color_oscuro:#403737;
	  --bg_violet_transp:#e479ef8f;
	  --bg_rosa_transp:#db859178;
	  --bg_preppy_grey:#020814b3;
      --preppy-primary: #aaac6d;
      --preppy-secondary: orange;
      --preppy-text: #393737;
	  --color_white:#ffffff;
      --radius: 16px;
      --transition: 0.3s ease;
	  --text_brown:#7c6e52;
		--textBlack: #c8ccd3;
	  --rojito:#f5576cb3;
	  
	  --otio_azul:#3e71e8;
    }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: linear-gradient(135deg, var(--text_brown) 0%, var(--rojito) 100%);
             font-family: "Poppins", sans-serif;
			 font-size:1em;
			  background: var(--color_white);
			  color: var(--preppy-text);
			  justify-content: center;
			  padding: .2rem;
        }

		
	.container{
		display: flex;
		flex-direction:column;
		gap: .7rem;
		justify-content: center;
		max-width: 1220px;
		margin: 0 auto;
	}

    .card {
		display:flex;
		flex-direction:column;
		gap:.5rem;	
		flex: 1 0 40%;
      width: 100%;
      border-radius: var(--radius);
      overflow: hidden;
      animation: fadeIn 0.8s ease;	  
		animation: countUp 0.5s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px),scale(0.5); }
      to { opacity: 1; transform: translateY(0),scale(1); }
    } 
	@keyframes fadeIn2 {
      from { opacity: 0; transform: translateY(-20px); }
      to { opacity: 1; transform: translateY(0); }
    }	

    .hero-img {
      width: 100%;
      height: 300px;
      object-fit: cover;
      display: block;
    }	

        h1 {
            color: var(--preppy-text);
            text-align: center;
            margin-bottom: .5rem;
            font-size: 1.5em;	
			letter-spacing: .2em;
			-webkit-text-stroke-width: 0.5px;
			-webkit-text-stroke-color: grey;
			text-transform: uppercase;
			text-shadow: rgb(0, 0, 0) 2px 2px 4px;
			white-space: nowrap;
            font-weight: 300;			
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .subtitle {
            color: var(--text_brown);
            text-align: center;
            font-size: 1.1em;
			line-height: 1.5;
        }

        /* Modal personalizado */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 20px;
            animation: fadeIn 0.3s ease;
        }

        .modal-overlay.show {
            display: flex;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideIn {
            from { 
                transform: translateY(-50px);
                opacity: 0;
            }
            to { 
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal-content {
            background: var(--color_white);
            padding: 30px;
            border-radius: 20px;
            max-width: 500px;
            width: 100%;
            text-align: center;
            box-shadow: 0 20px 60px rgba(0,0,0,0.4);
            animation: slideIn 0.3s ease;
        }

        .modal-icon {
            font-size: 4em;
            margin-bottom: 20px;
        }

        .modal-icon.success {
            color: #28a745;
        }

        .modal-icon.error {
            color: #dc3545;
        }

        .modal-icon.warning {
            color: #ffc107;
        }

        .modal-title {
            font-size: 1.8em;
            color: var(--rojito);
            margin-bottom: 15px;
            font-weight: 600;
        }

        .modal-message {
            font-size: 1.1em;
            color: var(--preppy-text);
            margin-bottom: 25px;
            line-height: 1.6;
        }

        .modal-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
        }

        .modal-btn {
            padding: 12px 30px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            min-width: 120px;
        }

        .modal-btn-primary {
            <!-- background: linear-gradient(135deg, #1e3c72 0%, var(--preppy-text) 100%); -->
            color: var(--color_white);
        }

        .modal-btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(42, 82, 152, 0.4);
        }

        .modal-btn-secondary {
            background: var(--bg_violet_transp);
            color: var(--color_white);
        }

        .modal-btn-secondary:hover {
            background: var(--bg_preppy_grey);
            transform: translateY(-2px);
        }

        .modal-btn-success {
            background: #28a745;
            color: var(--color_white);
        }

        .modal-btn-success:hover {
            background: #218838;
            transform: translateY(-2px);
        }

        /* Toast notifications */
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--color_white);
            padding: 20px 25px;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            display: none;
            align-items: center;
            gap: 15px;
            z-index: 2000;
            min-width: 300px;
            animation: slideInRight 0.3s ease;
        }

        @keyframes slideInRight {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .toast.show {
            display: flex;
        }

        .toast-icon {
            font-size: 2em;
        }

        .toast-content {
            flex: 1;
        }

        .toast-title {
            font-weight: 600;
            color: #1e3c72;
            margin-bottom: 5px;
        }

        .toast-message {
            color: #555;
            font-size: 0.9em;
        }

        .info-section {		
			font-family: "Playfair Display", serif;
            background: var(--color_white);
            padding: 1.5rem;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            margin-bottom: 1rem;
        }

        .info-section h2 {
            color: var(--preppy-primary);
            margin-bottom: .8rem;
            padding-bottom: .5rem;
			font-size: 1.3em;
			text-align: center;
        }

        .info-section p {
            color: #555;
            line-height: 1.2;
            margin-bottom: .5rem;
        }

        .info-section ul {
            list-style: none;
            padding-left: 0;
        }

        .info-section li {
            color: #555;
            line-height: 1.2;
            margin-bottom: .5rem;
            padding-left: 1rem;
            position: relative;
        }

        .info-section li:before {
            content: "âœ“";
            position: absolute;
            left: 0;
            color: #2a5298;
            font-weight: bold;
            font-size: 1.2em;
        }

        .form-container {
            background:var(--color_white);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            margin-bottom: 30px;
        }

        .form-container h2 {
            color: var(--preppy-primary);
            margin-bottom: 25px;
            font-size: 1.8em;
            text-align: center;
        }

        .form-group {
            margin-bottom: 1rem;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: var(--preppy-text);
            font-weight: 500;
        }

        label .required {
            color: #dc3545;
        }

        input, select {
            width: 100%;
            padding: .7rem;
            border: 1px solid var(--textBlack);
            border-radius: 10px;
            font-size: 1em;
            transition: all 0.3s;
        }

        input:focus, select:focus {
            outline: none;
            border-color: var(--otio_azul);
            box-shadow: 0 0 0 3px rgba(42, 82, 152, 0.1);
        }

        input.error-field, select.error-field {
            border-color: var(--rojito);
            animation: shake 0.5s;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .error, .msg_error {
            color: var(--rojito);
            font-size: .8em;
            margin-top: 1px;
            display: none;
            font-weight: 500;
            padding: 8px 12px;
            background: var(--textBlack);
            border-radius: 5px;
            border-left: 1px solid var(--rojito);
        }

        .error.show {
            display: block;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
				background-color:yellow;
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
		
		.msg_error.show{background-color:var(--preppy-bg); display:block;}

        button {
            width: 100%;
            padding: .6rem .85rem;
            background: linear-gradient(135deg, var(--text_brown) 0%, var(--textBlack) 100%);
            color: var(--color_white);
            border: none;
            border-radius: 10px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(42, 82, 152, 0.4);
			background: linear-gradient(135deg, var(--amma) 0%, var(--rosa) 100%);
        }

        button:active {
            transform: translateY(0);
        }
		
	  .controls{
			display:flex; gap:.5rem; margin-top:1rem;
		}
	  #copyBtn, .linkbtn{
		border:0;padding:.6rem .85rem;
		border-radius:10px;
		font-weight:600;    
		color:var(--color_white); 
		cursor:pointer;
		box-shadow:0 8px 20px rgba(79,70,229,0.12);
		transition:transform .12s, 
		box-shadow .12s, 
		opacity .12s;
	  }
	  .linkbtn { background:transparent; color:var(--accent); box-shadow:none; padding:0.5rem 0.6rem; border: 1px solid rgba(79,70,229,0.08);}

	

        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 1rem 1.5rem;
        }

        .stat-card {
            background:var(--color_white);
            padding:1rem;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            text-align: center;
            border-top: 2px solid var(--preppy-primary);
            transition: transform 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-card h3 {
            color: var(--text_brown);
            margin-bottom: 10px;
        }

        .stat-number {
            font-size: 1.2em;
            font-weight: bold;
            color: var(--text_brown);
            animation: countUp 0.5s ease;
        }
		.dataInvitados{display:flex;justify-content: space-around;}

        @keyframes countUp {
            from { 
                opacity: 0;
                transform: scale(0.5);
            }
            to { 
                opacity: 1;
                transform: scale(1);
            }
        }

        .confirmed-list {
            margin-top: 5px;
            text-align: left;
            max-height: 200px;
            overflow-y: auto;
        }

        .confirmed-name {
            padding: 10px 15px;
            margin: 8px 0;
            border-radius: 8px;
            font-size: 14px;
			border: 2px solid var(--bg_preppy-si);
			border-left: 2px solid var(--otio_azul);
            animation: slideIn 0.3s ease;
        }

        .table-container {
            background: var(--color_white);
            padding: 30px;
            border-radius: 15px;
			border-top: 2px solid var(--preppy-primary);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            overflow-x: auto;
        }

        .table-container h2 {
            color: var(--preppy-primary);
            margin-bottom: 20px;
            font-size: 1.3em;
			text-align: center;
        }

        table {
            width: 100%;
            border-collapse: collapse;			
			font-size: .7em;
        }

        th, td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }

        th {
            background: var(--bg_preppy_grey);
            color: var(--color_white);
            font-weight: 600;
            position: sticky;
            top: 0;
        }

        tbody tr {
            animation: fadeIn 0.3s ease;
        }

        tr:hover {
            background: #f8faff;
        }

        .badge {
            padding: 6px 14px;
            border-radius: 10px;
            font-size: .7em;
            font-weight: 500;
            display: inline-block;
        }

        .badge-si {
            background: var(--bg_preppy-si);
            color: var(--color_oscuro);
        }

        .badge-no {
            background: transparent;
            color: var(--rojito);
			border: 1px solid var(--rojito);
        }

        .empty-state {
            text-align: center;
            color: #999;
            padding: 40px;
        }
		  
    .containerLimite, .dash{
      background: var(--color_white);
      padding: .5rem;
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      text-align: center;
    }
	.fecha-limite{padding: 1rem;}

	.dash{
		flex: 1 0 50%;
		<!-- flex: 0 1 auto; -->
		animation: fadeIn2 0.8s ease;
		animation: countUp 0.5s ease;
	}
	
	footer{
		display:grid;
		grid-template-columns:repeat(auto-fit, minmax(300px, 1fr));
		justify-items: center;
		background-color:var(--preppy-text);
		color:var(--preppy-bg);
		font-size: .7em;
		min-height: 50px;
		align-items: center;
		animation: fadeIn 0.8s ease;
	}
	
  .modal{
    position:fixed;inset:0;display:none;align-items:center;justify-content:center;
    backdrop-filter: blur(4px); background:rgba(2,6,23,0.4); z-index:60;
  }
  .modal.open{display:flex;}
  .modal .panel{background:var(--preppy-bg); padding:1.25rem;border-radius:12px; max-width:520px; width:94%; box-shadow:0 20px 60px rgba(2,6,23,0.45);}
  .tiny{ font-size:.86rem; color:var(--muted) }
    .countdown {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: .5rem;
      margin-bottom: 20px;
    }
	.btnsCompartir{
		display: flex;
		gap: .5rem;
		margin-top: .6rem;
		align-items: center;
		width: 100%;
	}

    .time-box {
      background: transparent);
      <!-- background: linear-gradient(135deg, var(--textBlack) 0%, var(--textBlack) 100%); -->
      padding: .5rem;
      border-radius: 15px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    .time-number {
      font-size: 1.3em;
      font-weight: bold;
      color: var(--bg_violet_transp);
      display: block;
      margin-bottom: 5px;
    }

    .time-label {
      font-size: .7em;
      color: var(--bg_violet_transp);
      text-transform: uppercase;
      font-weight: 600;
    }
	
	#pFaltanDias{text-shadow:0px 1px 1px var(--rojito);}	


    .finalizado {
      background: linear-gradient(135deg, var(--bg_violet_transp) 10%, var(--bg_rosa_transp) 100%);
      color: var(--color_white);
      padding: 1.5rem;
      border-radius: 15px;
      font-size: 1.3em;
      font-weight: bold;
    }
	
		
        @media (min-width: 768px) {
            h1 {
                font-size: 2em;
            }
            
            .subtitle {
                font-size: 1em;
            }

            .form-container, .info-section, .table-container {
                padding: 20px;
            }

            .modal-content {
                padding: 25px 20px;
            }

            .toast {
                right: 10px;
                left: 10px;
                min-width: auto;
            }

            table {
                font-size: .6em;
            }

            th, td {
                padding: .6rem;
            }
			
			
			.countdown {
				grid-template-columns: repeat(2, 1fr);
			  }
			  
			  h1 {
				font-size: 24px;
			  }
			  
			  .time-number {
				font-size: 28px;
			  }
			  
				  footer{font-size: 1em;}
				  .container{flex-direction:row;}
        }
    </style>
</head>
<body>
    <div class="container">
		<div class="card">
			<img src="assets/cajas.jpg" alt="cajas" loading="lazy" class="hero-img">
			<h1>InvitaciÃ³n Especial</h1>
			<p class="subtitle">EstÃ¡s invitado a una joda especial. <br> Por favor confirma tu asistencia.</p>

			<div class="controls">
				<button class="btn" onclick="openMaps()">Ver ubicaciÃ³n </button>
			  <button id="shareBtn" type="button">Compartir URL</button>
			</div>
			
			<div class="form-container">
				<h2>Confirma tu Asistencia</h2>
				<form id="asistenciaForm">
					<div class="form-group">
						<label for="nombre">Nombre Completo <span class="required">*</span></label>
						<input type="text" id="nombre" placeholder="Ingresa tu nombre completo">
						<div class="error" id="nombreError">âš  Por favor ingresa tu nombre completo</div>
					</div>

					<div class="form-group">
						<label for="ci">CÃ©dula de Identidad <span class="required">*</span></label>
						<input type="text" id="ci" placeholder="Ingresa tu cÃ©dula de identidad">
						<div class="error" id="ciError">âš  Por favor ingresa tu cÃ©dula de identidad</div>
						<small class="msg_error"></small>
					</div>

					<div class="form-group">
						<label for="confirmacion">Â¿Confirmas tu asistencia? <span class="required">*</span></label>
						<select id="confirmacion">
							<option value="">-- Selecciona una opciÃ³n --</option>
							<option value="true">SÃ­, soy tremendo GAY</option>
							<option value="false">No podrÃ© asistir</option>
						</select>
						<div class="error" id="confirmacionError">âš  Por favor selecciona si asistirÃ¡s o no</div>
					</div>

					<button type="submit">Confirmar Asistencia</button>
				</form>
			</div>
			
			<div class="info-section">
				<h2>Como estarÃ­a para una Mudanza!</h2>
				<p>
					Necesito humanos que no le tengan miedo al polvo, a las cajas mal cerradas ni a los muebles que parecen tener vida propia.
				</p>
				<p> La mudanza se viene con todo y yo solo tengo dos manos y media neurona funcionando. Venite, pasamos mÃºsica, hacemos chistes y fingimos que todo estÃ¡ frÃ­amente calculado.
				</p>
				<p>AtenciÃ³n: este evento incluye beneficios exclusivos como pizza gratis, hidrataciÃ³n constante, y asado!!!!!
				</p>
			</div>
		</div>
		
		<div class="dash">
		  
			  <div class="containerLimite">
					<h2>ðŸŽ„ Cuenta Regresiva ðŸŽ„</h2>
					 <p class="fecha-limite" id="fechaFormateada"></p>
			
					<div class="countdown">
					  <div class="time-box">
						<span class="time-number" id="dias">00</span>
						<span class="time-label">DÃ­as</span>
					  </div>
					  <div class="time-box">
						<span class="time-number" id="horas">00</span>
						<span class="time-label">Horas</span>
					  </div>
					  <div class="time-box">
						<span class="time-number" id="minutos">00</span>
						<span class="time-label">Minutos</span>
					  </div>
					  <div class="time-box">
						<span class="time-number" id="segundos">00</span>
						<span class="time-label">Segundos</span>
					  </div>
					</div>
				
				  <p id="pFaltanDias">---</p>
				</div>
				
			<div class="stats-container">
				<div class="stat-card">
					<div class="dataInvitados">
						<h3>Total de Invitados</h3>
						<div class="stat-number" id="totalInvitados">0</div>
					</div>
				</div>
				<div class="stat-card">
					<div class="dataInvitados">
						<h3>Confirmados</h3>
						<div class="stat-number" id="totalConfirmados">0</div>
					</div>
					<div class="confirmed-list" id="confirmedList"></div>
				</div>
			</div>

			<div class="table-container">
				<h2>Lista de Invitados Registrados</h2>
				<table id="invitadosTable">
					<thead>
						<tr>
							<th>ID</th>
							<th>Nombre</th>
							<th>CÃ©dula</th>
							<th>ConfirmaciÃ³n</th>
							<th>Fecha de Registro</th>
						</tr>
					</thead>
					<tbody id="invitadosBody">
						<tr>
							<td colspan="5" class="empty-state">No hay invitados registrados aÃºn</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
	
		<!-- modal para compartir -->
		<div id="modal" class="modal" role="dialog" aria-hidden="true">
		  <div class="panel">
			<h3 id="modalTitleCompartir">Compartir invitaciÃ³n</h3>
			<p id="modalText" class="tiny">URL lista para copiar</p>
			<div class="btnsCompartir">
			  <button id="copyBtn">Copiar</button>
			  <button id="closeModal" class="linkbtn">Cerrar</button>
			</div>
		  </div>
		</div>
		<!-- Modal personalizado -->
		<div class="modal-overlay" id="modalOverlay">
			<div class="modal-content">
				<div class="modal-icon" id="modalIcon"></div>
				<div class="modal-title" id="modalTitle"></div>
				<div class="modal-message" id="modalMessage"></div>
				<div class="modal-buttons" id="modalButtons"></div>
			</div>
		</div>

		<!-- Toast notification -->
		<div class="toast" id="toast">
			<div class="toast-icon" id="toastIcon"></div>
			<div class="toast-content">
				<div class="toast-title" id="toastTitle"></div>
				<div class="toast-message" id="toastMessage"></div>
			</div>
		</div>
		
	</div>
		
		<footer class="footer-note">
           <p>Â© <span id="year"></span> Kikiriya DevOps â€” Todos los derechos reservados.</p>
			<p>Hecho con ðŸ’Š</p>
        </footer>

    <script>
        //datos de prueba si noi quiero cargar desde BD
  const invitados=[
	  {  id: generarID(),
		 nombre: "Chelo",
		 cedulaIdentidad: "5.623.984-9",
		 confirmacion:true,
		 fechaIngreso: formatearFecha()
	   },
	   {  id: generarID(),
		 nombre: "Canibal",
		 cedulaIdentidad: "3.124.653-7",
		 confirmacion:true,
		 fechaIngreso:formatearFecha()
	   },
	   {  id: generarID(),
		 nombre: "Loco Milton",
		 cedulaIdentidad: "1.542.544-9",
		 confirmacion:true,
		 fechaIngreso:formatearFecha()
	   },
	   {  id: generarID(),
		 nombre: "Andres",
		 cedulaIdentidad: "2.345.657-2",
		 confirmacion:false,
		 fechaIngreso:formatearFecha()
	   },
	   {  id: generarID(),
		 nombre: "Ale",
		 cedulaIdentidad: "3.124.653-7",
		 confirmacion:true,
		 fechaIngreso:formatearFecha()
	   },
	   {  id: generarID(),
		 nombre: "Leo Pesqueira",
		 cedulaIdentidad: "1.542.544-9",
		 confirmacion:true,
		 fechaIngreso:formatearFecha()
	   },
	   {  id: generarID(),
		 nombre: "Jorge Diaz",
		 cedulaIdentidad: "2.345.657-2",
		 confirmacion:true,
		 fechaIngreso:formatearFecha()
	   },
	   {  id: generarID(),
		 nombre: "Tomasito",
		 cedulaIdentidad: "3.124.653-7",
		 confirmacion:true,
		 fechaIngreso:formatearFecha()
	   },
	   {  id: generarID(),
		 nombre: "Chino",
		 cedulaIdentidad: "1.542.544-9",
		 confirmacion:true,
		 fechaIngreso:formatearFecha()
	   },
	   {  id: generarID(),
		 nombre: "Evaristo",
		 cedulaIdentidad: "2.345.657-2",
		 confirmacion:true,
		 fechaIngreso:formatearFecha()
	   },
	   {  id: generarID(),
		 nombre: "Fleitas",
		 cedulaIdentidad: "3.124.653-7",
		 confirmacion:true,
		 fechaIngreso:formatearFecha()
	   },
	   {  id: generarID(),
		 nombre: "Negro Gerardo",
		 cedulaIdentidad: "1.542.544-9",
		 confirmacion:true,
		 fechaIngreso:formatearFecha()
	   }
  ]

        function generarID() {
            return 'INV-' + Math.random().toString(36).substr(2, 4).toUpperCase();
        }

        function formatearFecha() {
            const now = new Date();
            const dia = String(now.getDate()).padStart(2, '0');
            const mes = String(now.getMonth() + 1).padStart(2, '0');
            const aÃ±o = now.getFullYear();
            const hora = String(now.getHours()).padStart(2, '0');
            const minutos = String(now.getMinutes()).padStart(2, '0');
            const segundos = String(now.getSeconds()).padStart(2, '0');
            return `${dia}/${mes}/${aÃ±o} `;
        }

        // Sistema de modal personalizado
        function showModal(title, message, icon, buttons) {
            const modal = document.getElementById('modalOverlay');
            const modalIcon = document.getElementById('modalIcon');
            const modalTitle = document.getElementById('modalTitle');
            const modalMessage = document.getElementById('modalMessage');
            const modalButtons = document.getElementById('modalButtons');

            modalIcon.textContent = icon;
            modalIcon.className = 'modal-icon ' + (icon === 'âœ…' ? 'success' : icon === 'âŒ' ? 'error' : 'warning');
            modalTitle.textContent = title;
            modalMessage.textContent = message;
            
            modalButtons.innerHTML = '';
            buttons.forEach(btn => {
                const button = document.createElement('button');
                button.className = 'modal-btn ' + btn.class;
                button.textContent = btn.text;
                button.onclick = () => {
                    modal.classList.remove('show');
                    if (btn.callback) btn.callback();
                };
                modalButtons.appendChild(button);
            });

            modal.classList.add('show');
        }

        // Sistema de toast notification
        function showToast(title, message, icon) {
            const toast = document.getElementById('toast');
            const toastIcon = document.getElementById('toastIcon');
            const toastTitle = document.getElementById('toastTitle');
            const toastMessage = document.getElementById('toastMessage');

            toastIcon.textContent = icon;
            toastTitle.textContent = title;
            toastMessage.textContent = message;

            toast.classList.add('show');

            setTimeout(() => {
                toast.classList.remove('show');
            }, 4000);
        }

        function actualizarEstadisticas() {
            const totalInvitados = invitados.length;
            const confirmados = invitados.filter(inv => inv.confirmacion === true);
            
            document.getElementById('totalInvitados').textContent = totalInvitados;
            document.getElementById('totalConfirmados').textContent = confirmados.length;
            
            const confirmedList = document.getElementById('confirmedList');
            confirmedList.innerHTML = '';
            
            if (confirmados.length === 0) {
                confirmedList.innerHTML = '<p style="color: #999; font-size: 14px; text-align: center; margin-top: 10px;">No hay confirmados aÃºn</p>';
            } else {
                confirmados.forEach(inv => {
                    const div = document.createElement('div');
                    div.className = 'confirmed-name';
                    div.textContent = inv.nombre;
                    confirmedList.appendChild(div);
                });
            }
        }

        function actualizarTabla() {
            const tbody = document.getElementById('invitadosBody');
            
            if (invitados.length === 0) {
                tbody.innerHTML = '<tr><td colspan="5" class="empty-state">No hay invitados registrados aÃºn</td></tr>';
                return;
            }
            
            tbody.innerHTML = '';
            invitados.forEach(invitado => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td><strong>${invitado.id}</strong></td>
                    <td>${invitado.nombre}</td>
                    <td>${invitado.cedulaIdentidad}</td>
                    <td><span class="badge ${invitado.confirmacion ? 'badge-si' : 'badge-no'}">${invitado.confirmacion ? 'SÃ­ soy GAY' : 'Me dejo Igual'}</span></td>
                    <td>${invitado.fechaIngreso}</td>
                `;
                tbody.appendChild(tr);
            });
        }

		function removerClasesError(claseError, claseShow){ 
			if(claseError.classList.contains(claseShow)){
				claseError.classList.remove(claseShow);
			}
		}
		
       
		function tieneOchoDigitos(inputID) {
						  
		 const smallError = document.querySelector('.msg_error'); 
		  //const smallError = inputID.nextElementSibling; // <small> debajo del inputID

		  // limpiar mensajes previos
		  smallError.classList.remove('show');
		  smallError.textContent = "";
		  inputID.classList.remove("error");

		  // eliminar todo lo que no sea nÃºmero
		  let soloNumeros = inputID.value.replace(/\D/g, "");

		  // actualizar el inputID (opcional si querÃ©s que se refleje)
		  inputID.value = soloNumeros;

		  // validar longitud
		  if (soloNumeros.length !== 8) {
				smallError.classList.add('show');
				smallError.textContent = "La cÃ©dula debe tener exactamente 8 nÃºmeros.";
				
			return false;
		  }
		  
          cedulaFormateada =  formatearCedula(soloNumeros);
		  return true;
		}		
		
		function estaVacio(input) {
		  return input.value.trim() === "";
		}
		
		 let cedulaFormateada = "x.xxx.xxx-x";		
			
		function formatearCedula(cedula) {
			// Cedula debe venir como un string de 8 nÃºmeros exactos
			if (!/^\d{8}$/.test(cedula)) return null;

			const p1 = cedula.substring(0, 1);      // 1er nÃºmero
			const p2 = cedula.substring(1, 4);      // 3 nÃºmeros
			const p3 = cedula.substring(4, 7);      // 3 nÃºmeros
			const p4 = cedula.substring(7, 8);      // Ãºltimo nÃºmero

			return `${p1}.${p2}.${p3}-${p4}`;
		}
		
        document.getElementById('asistenciaForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Limpiar errores previos
            document.querySelectorAll('.error').forEach((elem, indice) => {
				removerClasesError(elem, 'show');
				
			  });
			  
			  //TERNARIO1
			  ///ternario2
			  /*document.querySelectorAll('.error').forEach((elem, indice) => { 
				if(elem.classList.contains('show')){ 
					elem.classList.remove('show');
					console.log(`Se quitÃ³ 'show' del elemento .error -`, indice); 
				 } 
			  }); */
			  
			  /*console.log(  
					elem.classList.contains('show')
				     ? "El .error tiene 'show'"+indice 
				     : "El .error NO tiene 'show'"+indice,elem 
				   ) */
				//elem.classList.contains('show') 
					//? console.log("show") 
					//: console.log('El elemento NO tiene la clase "show".');
					
			/*removerClasesError(error,'show')}); 
            document.querySelectorAll('.error').forEach(error => error.classList.remove('show'));*/
			
            document.querySelectorAll('input, select').forEach(field => field.classList.remove('error-field'));
            
            const nombre = document.getElementById('nombre').value.trim(); //si es vacio
			const inputCedula = document.getElementById('ci');
			const errorCedula  = document.getElementById('ciError');
            const confirmacionValue = document.getElementById('confirmacion').value;
			
            let esValido = true;
            let esNumberOk = true;
            
            // Validar nombre (requerido)
            if (!nombre) {
                document.getElementById('nombreError').classList.add('show');
                document.getElementById('nombre').classList.add('error-field');
                esValido = false;
            }
            
            // Validar cÃ©dula (requerido)
            if (estaVacio(inputCedula)) {
                errorCedula.classList.add('show');
                errorCedula.textContent = "Este campo no puede estar vacÃ­o."; 
                inputCedula.classList.add('error-field');
                esValido = false;
			}
			
			if(!tieneOchoDigitos(inputCedula)) {
				/*errorCedula.classList.add('show');
				errorCedula.textContent = "Solo 8 Numeros"; 
				inputCedula.classList.add('error-field');*/
				
				//esValido = false;
				esNumberOk = false;
			}			
				
			            
            // Validar confirmaciÃ³n (requerido)
            if (!confirmacionValue) {
                document.getElementById('confirmacionError').classList.add('show');
                document.getElementById('confirmacion').classList.add('error-field');
                esValido = false;
            }
					
			
			 if (!esValido) {
                showModal(
                    'Campos Incompletos',
                    'Por favor completa todos los campos requeridos antes de continuar.',
                    'âŒ',
                    [{ text: 'Entendido', class: 'modal-btn-primary' }]
                );
                return;
            }
			if(!esNumberOk){
				showModal(
                    'Campos Incompletos',
                    'Zapallera! fijate cantidad de Numeros en la CÃ©dula.',
                    'ðŸ„',
                    [{ text: 'VOY', class: 'modal-btn-primary' }]
                );
                return;
			}
            
			
            
            
            const confirmacion = confirmacionValue === 'true';
            
            // Si seleccionÃ³ "No", mostrar confirmaciÃ³n
            if (!confirmacion) {
                showModal(
                    'Â¿EstÃ¡s seguro?',
                    'Â¿Confirmas que no podrÃ¡s asistir a la celebraciÃ³n? Nos encantarÃ­a contar con tu presencia.',
                    'âš ï¸',
                    [
                        { 
                            text: 'Cancelar', 
                            class: 'modal-btn-secondary'
                        },
                        { 
                            text: 'SÃ­, no podrÃ© asistir', 
                            class: 'modal-btn-primary',
                            callback: () => registrarInvitado(nombre, cedulaFormateada, confirmacion)
                        }
                    ]
                );
                return;
            }	
			
			console.log("Formulario vÃ¡lido. Procesando..."+Number.isNaN(Number(cedulaFormateada)));
			 
            registrarInvitado(nombre, cedulaFormateada, confirmacion);
			
        });

        function registrarInvitado(nombre, ciValue, confirmacion) {
            // Crear invitado con todos los datos requeridos
            const invitado = {
                id: generarID(),
                nombre: nombre,
                cedulaIdentidad: ciValue,
                confirmacion: confirmacion,
                fechaIngreso: formatearFecha()
            };
            
            // Agregar a la lista
            invitados.push(invitado);
            
            console.log('Invitado agregado:', invitado);
            console.log('Total invitados:', invitados.length);
            
            // Actualizar interfaz
            actualizarEstadisticas();
            actualizarTabla();
            
            // Limpiar formulario
            document.getElementById('asistenciaForm').reset();
            
            // Scroll suave a la tabla
            setTimeout(() => {
                document.querySelector('.table-container').scrollIntoView({ 
                    behavior: 'smooth', 
                    block: 'start' 
                });
            }, 500);
            
            // Mostrar mensaje de Ã©xito
            if (confirmacion) {
                showToast(
                    'Â¡ConfirmaciÃ³n Exitosa!',
                    'Â¡Excelente! Tu asistencia ha sido confirmada. Â¡Te esperamos!',
                    'ðŸŽ‰'
                );
            } else {
                showToast(
                    'Registro Completado',
                    'Lamentamos que no puedas asistir. Gracias por informarnos.',
                    'âœ…'
                );
            }
        }

        // Cerrar modal al hacer clic fuera
        document.getElementById('modalOverlay').addEventListener('click', function(e) {
            if (e.target === this) {
                this.classList.remove('show');
            }
        });
		// FORMATEADOR CORTO FECHAS generar resta de dias faltamtes//////////////////
		function mostrarTiempoRestante(fechaLimite) {
		  const ahora = new Date();
		  const limite = new Date(fechaLimite);
			  const pFaltanDias = document.getElementById('pFaltanDias');
		  
		  // Formateamos la fecha lÃ­mite con Intl.DateTimeFormat
		  const formateador = new Intl.DateTimeFormat('es-ES', {
			day: 'numeric',
			month: 'long',
			year: 'numeric',
			hour: '2-digit',
			minute: '2-digit'
		  });
		  const fechaFormateada = formateador.format(limite);
		  
		  // Mostramos la fecha formateada una sola vez
		  document.getElementById('fechaFormateada').textContent = `Hasta el ${fechaFormateada}`;
		  
		  // Calculamos la diferencia en milisegundos
		  const diferencia = limite - ahora;
		  
		  // Si ya pasÃ³ la fecha
		  if (diferencia <= 0) {
			document.querySelector('.countdown').style.display = 'none';
			pFaltanDias.innerHTML = 'ðŸŽ‰ Â¡La fecha ha llegado! ðŸŽ‰';
			pFaltanDias.className = 'finalizado';
			return;
		  }
		  
		  // Convertimos a dÃ­as, horas, minutos y segundos
		  const dias = Math.floor(diferencia / (1000 * 60 * 60 * 24));
		  const horas = Math.floor((diferencia % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
		  const minutos = Math.floor((diferencia % (1000 * 60 * 60)) / (1000 * 60));
		  const segundos = Math.floor((diferencia % (1000 * 60)) / 1000);
		  
		  // Actualizamos los elementos del DOM
		  document.getElementById('dias').textContent = dias.toString().padStart(2, '0');
		  document.getElementById('horas').textContent = horas.toString().padStart(2, '0');
		  document.getElementById('minutos').textContent = minutos.toString().padStart(2, '0');
		  document.getElementById('segundos').textContent = segundos.toString().padStart(2, '0');
		  
		  // Mensaje descriptivo
		  const mensaje = `Faltan ${dias} dÃ­as, ${horas} horas, ${minutos} minutos y ${segundos} segundos`;
		  pFaltanDias.textContent = 'ðŸ·ðŸ¹âœ¨ðŸ“ðŸ’ðŸ„';

	}
	//*********
function makeSlug(name){
  return name.trim().toLowerCase()
    .normalize('NFD').replace(/[\u0300-\u036f]/g,'')
    .replace(/[^a-z0-9]+/g,'-').replace(/^-+|-+$/g,'');
}
function cleanCI(ci){ return ci.replace(/[^\d]/g,''); }

/* ValidaciÃ³n dÃ­gito verificador (Uruguay) */
function validarCI(ciInput){
  const ci = cleanCI(ciInput);
  if (!/^\d{7,8}$/.test(ci)) return false;
  const body = ci.slice(0, -1).padStart(7, '0');
  const dv = parseInt(ci.slice(-1),10);
  const factors = [2,9,8,7,6,3,4];
  let sum = 0;
  for(let i=0;i<7;i++){
    const n = parseInt(body[i],10);
    sum += n * factors[i];
  }
  const resto = sum % 10;
  const expected = resto === 0 ? 0 : 10 - resto;
  return expected === dv;
}
 // --- Datos del evento (modificalos a gusto) ---
  const anfitrion = "AndrÃ©s Arias";         // <--- pon tu nombre aquÃ­ si querÃ©s
  const descripcion = "Â¡Ven a celebrar con nosotros! MÃºsica, cena y baile.";
  const fechaHora = "10 de Enero Â· 20:00";
  const ubicacionURL = "https://www.google.com/maps?q=-34.873350,-56.212522"; // ejemplo
  // -----------------------------------------------
  // poblar UI
  <!-- document.getElementById('hostName').textContent = anfitrion; -->
  <!-- document.getElementById('eventInfo').textContent = `${descripcion} Â· ${fechaHora}`; -->
  <!-- document.getElementById('mapsBtn').href = ubicacionURL; -->
  <!-- const publicPath = `${location.origin}/invitacion/${makeSlug(anfitrion)}`; -->
  const publicPathNetlify = `https://confirmarinvitacion.netlify.app/`;
  
// compartir modal
  const modal = document.getElementById('modal'), modalText = document.getElementById('modalText'), modalTitleCompartir = document.getElementById('modalTitleCompartir');
  document.getElementById('shareBtn').addEventListener('click', ()=>{
    modalTitleCompartir.textContent = 'Compartir invitaciÃ³n';
    modalText.textContent = publicPathNetlify;
    modal.classList.add('open');
    modal.setAttribute('aria-hidden','false');
  });
  document.getElementById('closeModal').addEventListener('click', ()=>{ 
	modal.classList.remove('open'); 
	modal.setAttribute('aria-hidden','true'); 
});
  document.getElementById('copyBtn').addEventListener('click', async ()=>{
    try{ await navigator.clipboard.writeText(modalText.textContent); alert(`URL ${publicPathNetlify} copiada al portapapeles`); }
    catch(e){ alert('No se pudo copiar: '+e.message) }
  });
  
  modal.addEventListener('click',()=>{
	modal.classList.remove('open'); 
	modal.setAttribute('aria-hidden','true'); 
  });
  
  //footer
  const year=document.getElementById('year');
    year.textContent=new Date().getFullYear();
//*******************************************************************
   // Abrir Maps
  window.openMaps = () => {
    window.open("https://www.google.com/maps?q=-34.332696,-54.978521", "_blank");
  }
  
  
		
		// Inicializar
        document.addEventListener('DOMContentLoaded', () => {            
		 // loadData();
		 //cargo los dattos de prueba , arriba es desde BD
		  actualizarEstadisticas();
		  actualizarTabla();
		  
		 const fechaLimite = '2025-12-07 08:00:00';
      
      // Llamada inicial
      mostrarTiempoRestante(fechaLimite);
      
      // ActualizaciÃ³n cada segundo para incluir los segundos
      setInterval(() => {
        mostrarTiempoRestante(fechaLimite);
      }, 1000);
		  
        });
    </script>
</body>
</html>
